"0","# FIGURE 3 EXTENSION 2"
"0","# EXTENSION: TESTING FIGURE THREE WITH BINOMIAL REGRESSION"
"0","# This code will culminate in plot that looks at the treatment effect (political cue) on those with varying partisan affiliation. "
"0","# The hypothesis here states: Strong party affiliates that share party with the cue-giver are more likely to be party loyalists."
"0","# This model is the basis of the predictions and will help determine the causal effect of political cues on different levels of partisanship among DEMOCRATS. This model estimates support of policy based on race and the interaction between cues (conservative and liberal) and political ideology:"
"0","model1 <- stan_glm(Support ~ race_white + libtrump*pid7 + contrump*pid7, data = data[(data$contrump == 1 | data$self == 1 | data$libtrump == 1) & data$pid7 %in% c(4, 5, 6, 7),], refresh = 0)"
"0","# model <- lm(Support ~ race_white + libtrump*pid7 + contrump*pid7, data = data[(data$contrump == 1 | data$self == 1 | data$libtrump == 1) & data$pid7 %in% c(4, 5, 6, 7),])"
"0","# This data table serves as the control - the baseline for comparison. There is no cue in this data table:"
"0","newdata = as.data.frame(cbind(rep(1, 4), rep(0, 4), rep(0, 4), seq(4, 7, 1)))"
"0","colnames(newdata) <- c(""race_white"", ""contrump"", ""libtrump"", ""pid7"")"
"0","#conservative treatment: The effect of a conservative cue on those who identify with a conservative party at different degrees (pid7 = 4-7)"
"0","newdata1 = as.data.frame(cbind(rep(1, 4), rep(1, 4), rep(0, 4), seq(4, 7, 1)))"
"0","colnames(newdata1) <- c(""race_white"", ""contrump"", ""libtrump"", ""pid7"")"
"0","# These are predictions of the level of support at each Republican partisan level given the data table above with no cue:"
"0","plx0 <- posterior_linpred(model1, newdata = newdata, transform = TRUE)"
"0","#These are predictions of the level of support of a cue at each Republican partisan level given a conservative cue:"
"0","plx1 <- posterior_linpred(model1, newdata = newdata1, transform = TRUE)"
"0","# This estimates the causal effect of cues on different levels of Republican partisanship:"
"0","diff.cons <- plx1 - plx0"
"0",""
"0","diff.cons.med <- diff.cons%>%"
"0","    as_tibble()%>%"
"0","    summarize_all(median)"
"0",""
"0","# NOT SURE IF I CAN DO SE PREDS WITH POSTERIOR_LINPRED"
"0","# This is the staandard error of the estimates causal effects:"
"0","#diff.cons.se <- sqrt(plx1$se.fit^2 + plx0$se.fit^2)"
"0","# These are the upper and lower confidence intervals the causal effect. They are calculated by adding and subtract a standard deviation times the standard error calculated above:"
"0","# IS THIS A CONF INTERVAL, 95%?, 65%?:"
"0","#upper.cons <- diff.cons + 1.96*diff.cons.se"
"0","#lower.cons <- diff.cons - 1.96*diff.cons.se"
"0","# plots next to each other"
"0","par(mfrow = c(1, 2)) "
"0","# This chunk plots the causal effects the same way that figure 2 did, but with partisanship on the x-axis:"
"0","#dev.new(width = 4.5, height = 7)"
"0","plot(seq(4, 7, 1), diff.cons.med, ylim = c(-.25, .25), pch = 16, ylab = ""Estimated Average Treatment Effect"", xlab = ""Level of Partisan Affilitation"", axes = F, main = ""Conservative Trump Treatment"")"
